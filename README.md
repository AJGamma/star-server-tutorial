# Star实验室服务器使用简明指南

## 目录

[toc]

## 公网访问

目前服务器公网访问的策略是使用frp协议开放12号服务器的公网IP，利用12号服务器作为中转，再在12号服务器上通过ssh连接到内网的其他服务器。

访问流程：

首先在获取本地的ssh公钥。对于Windows系统，ssh公钥的位置在`C:\Users\用户名\.ssh\id_rsa.pub`，对于Linux系统，ssh公钥的路径在`~/.ssh/id_rsa.pub`。

若没有公钥，可以使用`ssh-keygen`命令生成。

练习林昂骏添加密钥。

添加密钥后可以直接使用ssh连接到12号服务器。

```bash
# 由于本仓库开源，因此不便公开公网ip和端口，如果需要访问请联系林昂骏
# ------ 本机环境 ------
ssh 12号服务器ip、端口和用户名
# ------ 12号服务器 ------
ssh 内网服务器ip、端口和用户名
# ------ 进入内网服务器 ------
```

### 设置别名

在中转服务器的`.ssh/config`文件中可以进行配置，简化ssh的连接命令。

如，对于以下连接命令：

```bash
ssh -pX 4027 adrian@10.254.29.57
```

可以在`~/.ssh/config`中添加以下内容：

```config
Host adrian
    HostName 10.254.29.57
    Port 4027
    User adrian
    ForwardX11 yes
```
进行以上配置后，可以直接使用`ssh adrian`命令连接到内网服务器的adrian账户。

在Windows或Mac系统中也可以进行类似配置，这里不多赘述。

### 注意事项

> [!WARNING]
> 注意：请勿在目标服务器上使用中转服务器的公钥，以防止中转服务器被攻击后导致内网其他服务器也被攻击。
> 账户密码不要相同，尽可能设置复杂密码以应对暴力破解。

### 目前问题

目前由于进行了一次ssh中转，因此VSCode等IDE的远程开发功能可能无法正常使用。相关问题目前正在解决。
